# â˜€ï¸ Solar ESS Manager

**íƒœì–‘ê´‘ ì—ë„ˆì§€ ì €ì¥ ì‹œìŠ¤í…œ ê´€ë¦¬ í”Œë«í¼**
ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§, ML ê¸°ë°˜ ë°œì „ëŸ‰ ì˜ˆì¸¡, ê°€ìƒ ì—ë„ˆì§€ ê±°ë˜ ì‹œë®¬ë ˆì´ì…˜

[![Deploy with Vercel](https://solar-ess-manager.vercel.app)

---

## ğŸ“‹ ëª©ì°¨

- [í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
- [ì„¤ì¹˜ ë° ì‹¤í–‰](#-ì„¤ì¹˜-ë°-ì‹¤í–‰)
- [API ë¬¸ì„œ](#-api-ë¬¸ì„œ)
- [ML ëª¨ë¸](#-ml-ëª¨ë¸)
- [íŒ€ ì†Œê°œ](#-íŒ€-ì†Œê°œ)
- [ë¼ì´ì„ ìŠ¤](#-ë¼ì´ì„ ìŠ¤)

---

## ğŸŒŸ í”„ë¡œì íŠ¸ ì†Œê°œ

**Solar ESS Manager**ëŠ” íƒœì–‘ê´‘ íŒ¨ë„ê³¼ ë°°í„°ë¦¬ë¥¼ í™œìš©í•œ ì—ë„ˆì§€ ì €ì¥ ì‹œìŠ¤í…œ(ESS)ì„ ê´€ë¦¬í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ IoT í”Œë«í¼ì…ë‹ˆë‹¤. Arduino ì„¼ì„œë¡œë¶€í„° ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³ , ë¨¸ì‹ ëŸ¬ë‹ ëª¨ë¸ì„ í†µí•´ ë°œì „ëŸ‰ì„ ì˜ˆì¸¡í•˜ë©°, ìµœì ì˜ ì—ë„ˆì§€ ë¶„ë°° ì „ëµì„ ì œì•ˆí•©ë‹ˆë‹¤.

### ğŸ’¡ í”„ë¡œì íŠ¸ ë°°ê²½

- **ë¬¸ì œ**: íƒœì–‘ê´‘ ë°œì „ì˜ ë³€ë™ì„±ìœ¼ë¡œ ì¸í•œ ì—ë„ˆì§€ ê´€ë¦¬ì˜ ì–´ë ¤ì›€
- **ëª©í‘œ**: ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ + ML ì˜ˆì¸¡ + ìë™ ìµœì í™”ë¥¼ í†µí•œ íš¨ìœ¨ì  ì—ë„ˆì§€ ê´€ë¦¬
- **ëŒ€ìƒ**: ì†Œê·œëª¨ íƒœì–‘ê´‘ ë°œì „ ì‹œìŠ¤í…œ ìš´ì˜ì, ë§ˆì´í¬ë¡œê·¸ë¦¬ë“œ ê´€ë¦¬ì

### ğŸ¯ ì£¼ìš” íŠ¹ì§•

- âš¡ **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§**: Arduino ì„¼ì„œ ë°ì´í„° 5ì´ˆ ê°„ê²© í´ë§
- ğŸ¤– **ML ì˜ˆì¸¡ ëª¨ë¸**: Random Forest ê¸°ë°˜ 1~3ì‹œê°„ ë°œì „ëŸ‰ ì˜ˆì¸¡
- ğŸ  **ê°€ìƒ ì—ë„ˆì§€ ê±°ë˜**: 4ì±„ë„ ë¦´ë ˆì´ ì œì–´ ì‹œë®¬ë ˆì´ì…˜
- ğŸ“Š **ë°ì´í„° ì‹œê°í™”**: Recharts ê¸°ë°˜ ì‹œê°„ëŒ€ë³„ ì—ë„ˆì§€ ì°¨íŠ¸
- ğŸ”„ **ê°€ìƒ/ì‹¤ì œ ëª¨ë“œ**: ë°±ì—”ë“œ ì—°ê²° ì‹¤íŒ¨ ì‹œ ê°€ìƒ í™˜ê²½ ìë™ ì „í™˜

---

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

### 1ï¸âƒ£ í™ˆ í˜ì´ì§€ (Home)
- í”„ë¡œì íŠ¸ ì†Œê°œ ë° íŒ€ ì •ë³´
- ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ (Framer Motion)
- ê¸°ìˆ  ìŠ¤íƒ ë° GitHub ë§í¬

### 2ï¸âƒ£ í†µê³„ í˜ì´ì§€ (Statistics)
- **ML ë°œì „ëŸ‰ ì˜ˆì¸¡**: 1ì‹œê°„/2ì‹œê°„/3ì‹œê°„ í›„ ì˜ˆì¸¡ê°’ í‘œì‹œ
- **ì‹œê°„ëŒ€ë³„ ì°¨íŠ¸**: ì˜¤ëŠ˜ vs ì–´ì œ ì—ë„ˆì§€ ì¶•ì ëŸ‰ ë¹„êµ
- **ì‹¤ì‹œê°„ ë°ì´í„°**: ë°±ì—”ë“œ ì—°ê²° ì‹œ ìë™ ê°±ì‹ 

### 3ï¸âƒ£ ê±°ë˜ í˜ì´ì§€ (Trade)
- **ê°€êµ¬ ì„ íƒ UI**: í´ë¦­ ì‹œ ì°½ë¬¸ ë¶ˆ ë“¤ì–´ì˜¤ëŠ” ì¸í„°ë™ì…˜
- **ìµœì  ì¡°í•© í‘œì‹œ**: ğŸ’¡ ì•„ì´ì½˜ìœ¼ë¡œ ì¶”ì²œ ê°€êµ¬ í‘œì‹œ
- **ê±°ë˜ ë‚´ì—­**: ì‹¤ì‹œê°„ ì—ë„ˆì§€ ì”ì•¡, í˜„ê¸ˆ ì”ì•¡ ì¶”ì 
- **ë°±ì—”ë“œ ë™ê¸°í™”**: SELL ì‹œ SOC(ë°°í„°ë¦¬ ì”ëŸ‰) ìë™ ì—…ë°ì´íŠ¸

### 4ï¸âƒ£ í™˜ê²½ ì„¤ì • í˜ì´ì§€ (EnvSetting)
- **ë°±ì—”ë“œ ì—°ê²° ì²´í¬**: ì‹¤ì‹œê°„/ê°€ìƒ ëª¨ë“œ ìƒíƒœ í™•ì¸
- **ìˆ˜ë™ ë°ì´í„° ì…ë ¥**: SOC, ë°œì „ëŸ‰, ì¡°ë„, í˜„ê¸ˆ ì”ê³  ì„¤ì •
- **ìë™ ê°€ìƒ ë°ì´í„°**: ëœë¤ ê°’ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í™˜ê²½ ìƒì„±
- **í™˜ê²½ ì´ˆê¸°í™”**: ëª¨ë“  ë°ì´í„° ë¦¬ì…‹ ê¸°ëŠ¥

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Frontend
| Category | Technology | Version |
|----------|-----------|---------|
| Framework | React | 19.2.0 |
| Build Tool | Vite | 7.2.2 |
| UI Library | Framer Motion | 12.23.24 |
| Visualization | Recharts | 3.4.1 |
| State | LocalStorage + React State | - |
| HTTP Client | Fetch API | - |
| Deployment | Vercel | - |

### Backend
| Category | Technology | Version |
|----------|-----------|---------|
| Framework | Flask | Latest |
| Database | MySQL | - |
| Scheduler | APScheduler | - |
| ML Library | scikit-learn | Latest |
| HTTP Client | requests | - |
| Server | gunicorn | Latest |

### Hardware
- Arduino Microcontroller
- íƒœì–‘ê´‘ íŒ¨ë„ & ë°°í„°ë¦¬
- ì¡°ë„ ì„¼ì„œ (Lux)
- SOC ì„¼ì„œ (ë°°í„°ë¦¬ ì”ëŸ‰)
- 4ì±„ë„ ë¦´ë ˆì´ ëª¨ë“ˆ (A, B, C, D)

### Machine Learning
- **ì•Œê³ ë¦¬ì¦˜**: Random Forest Regressor
- **ì˜ˆì¸¡ ëŒ€ìƒ**: 1ì‹œê°„/2ì‹œê°„/3ì‹œê°„ í›„ ë°œì „ëŸ‰
- **íŠ¹ì§•**: ì‹œê³„ì—´ ë°ì´í„° + ê¸°ìƒ ì •ë³´ (ì¡°ë„)
- **ë©”íŠ¸ë¦­**: RMSE, RÂ² Score

---

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  React Frontend (Vercel)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Home       â”‚ Statistics   â”‚ Trade    â”‚ EnvSettingâ”‚    â”‚
â”‚  â”‚ (Project Info)â”‚ (ML Predict) â”‚ (Virtual)â”‚ (Config)  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚              â†“ HTTPS (Fetch API)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Cloudflare Tunnel (HTTPS â†’ HTTP)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Flask Backend (Python)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ API Routes                                           â”‚  â”‚
â”‚  â”‚ /api/data    /api/energy    /api/relay  /api/channelsâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Services                                             â”‚  â”‚
â”‚  â”‚ Sensor | Energy | Relay | Channels | Common         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ MySQL Database                                       â”‚  â”‚
â”‚  â”‚ sun_data_realtime | sun_data_hourly | relay_status  â”‚  â”‚
â”‚  â”‚ trade_history                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ APScheduler (ë§¤ì‹œ ì •ê° ë°ì´í„° ì§‘ê³„)                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ML Model: Random Forest (rf_production_model.pkl)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†‘ HTTP Polling + POST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Arduino Hardware                               â”‚
â”‚  Sensors: LUX, SOC, Solar Power                            â”‚
â”‚  Relays: A (0.6W), B (1.55W), C (0.93W), D (0.61W)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ ì„¤ì¹˜ ë° ì‹¤í–‰

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Node.js 18+ (Frontend)
- Python 3.8+ (Backend)
- MySQL 8.0+
- Arduino IDE (Hardware ì—°ë™ ì‹œ)

### 1. í”„ë¡œì íŠ¸ í´ë¡ 

```bash
git clone https://github.com/Q5dis/SolarESSManager.git
cd SolarESSManager
```

### 2. Frontend ì„¤ì •

```bash
cd frontend
npm install
```

**í™˜ê²½ ë³€ìˆ˜ ì„¤ì •** (`.env.production`):
```env
VITE_BACKEND_SERVER=https://your-backend-url.com
```

**ê°œë°œ ì„œë²„ ì‹¤í–‰**:
```bash
npm run dev
# http://localhost:5173
```

**í”„ë¡œë•ì…˜ ë¹Œë“œ**:
```bash
npm run build
```

### 3. Backend ì„¤ì •

```bash
cd backend/api
pip install -r ../../requirements.txt
```

**í™˜ê²½ ë³€ìˆ˜ ì„¤ì •** (`.env`):
```env
DB_HOST=localhost
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_DATABASE=solar_ess
PORT=5000
```

**ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±**:
```sql
CREATE DATABASE solar_ess;
USE solar_ess;

-- sun_data_realtime í…Œì´ë¸”
CREATE TABLE sun_data_realtime (
    id INT AUTO_INCREMENT PRIMARY KEY,
    soc INT NOT NULL,
    solar_w FLOAT NOT NULL,
    lux FLOAT NOT NULL,
    timestamp DATETIME NOT NULL
);

-- sun_data_hourly í…Œì´ë¸”
CREATE TABLE sun_data_hourly (
    id INT AUTO_INCREMENT PRIMARY KEY,
    date DATE NOT NULL,
    hour INT NOT NULL,
    avg_soc FLOAT,
    avg_solar_w FLOAT,
    avg_lux FLOAT,
    UNIQUE KEY (date, hour)
);

-- relay_status í…Œì´ë¸”
CREATE TABLE relay_status (
    id INT AUTO_INCREMENT PRIMARY KEY,
    relay_name VARCHAR(10) NOT NULL UNIQUE,
    status VARCHAR(10) NOT NULL
);

-- relay_status ì´ˆê¸° ë°ì´í„°
INSERT INTO relay_status (relay_name, status) VALUES
    ('A', 'off'),
    ('B', 'off'),
    ('C', 'off'),
    ('D', 'off');

-- trade_history í…Œì´ë¸”
CREATE TABLE trade_history (
    id INT AUTO_INCREMENT PRIMARY KEY,
    buyer_id INT NOT NULL,
    amount FLOAT NOT NULL,
    timestamp DATETIME NOT NULL
);
```

**ì„œë²„ ì‹¤í–‰**:
```bash
python run.py
# Flask server running on http://localhost:5000
```

### 4. ML ëª¨ë¸ í•™ìŠµ (ì„ íƒì‚¬í•­)

```bash
cd ml
python model_train_rf.py
# í•™ìŠµ ì™„ë£Œ í›„ models/rf_production_model.pkl ìƒì„±ë¨
```

### 5. Arduino ì„¤ì • (í•˜ë“œì›¨ì–´ ì—°ë™ ì‹œ)

1. Arduino IDEì—ì„œ ì„¼ì„œ ì½”ë“œ ì—…ë¡œë“œ
2. `config_arduino.json` ì„¤ì • í™•ì¸
3. Arduinoê°€ ë°±ì—”ë“œ `/api/relay/control` í´ë§ ì‹œì‘
4. ì„¼ì„œ ë°ì´í„° `/api/data/solar`ë¡œ ì „ì†¡

---

## ğŸ“¡ API ë¬¸ì„œ

### Data Endpoints

#### `GET /api/data/latest`
ìµœì‹  ì„¼ì„œ ë°ì´í„° ì¡°íšŒ

**Response**:
```json
{
  "id": 199,
  "soc": 85,
  "solar_w": 4.29,
  "lux": 1717,
  "timestamp": "Mon, 08 Dec 2025 01:07:54 GMT"
}
```

#### `POST /api/data/solar`
ì„¼ì„œ ë°ì´í„° ì €ì¥ (Arduino â†’ Backend)

**Request**:
```json
{
  "soc": 85,
  "solar_w": 4.29,
  "lux": 1717
}
```

**Validation**:
- `0 <= soc <= 100`
- `solar_w >= 0`
- `lux >= 0`

#### `GET /api/data/history`
ê±°ë˜ ë‚´ì—­ ì¡°íšŒ

**Query Parameters**:
- `user_id` (optional): 1~4 (A~D)
- `start_date` (optional): YYYY-MM-DD
- `end_date` (optional): YYYY-MM-DD
- `date` (optional): YYYY-MM-DD

---

### Energy Endpoints

#### `GET /api/energy/predicted`
ML ëª¨ë¸ ê¸°ë°˜ ë°œì „ëŸ‰ ì˜ˆì¸¡

**Response**:
```json
{
  "predicted_energies": [150.45, 145.32, 140.21]
}
```
- Index 0: 1ì‹œê°„ í›„ ì˜ˆì¸¡ (W)
- Index 1: 2ì‹œê°„ í›„ ì˜ˆì¸¡ (W)
- Index 2: 3ì‹œê°„ í›„ ì˜ˆì¸¡ (W)

**Features Used**:
- ì‹œê°„ ì •ë³´ (year, month, day, hour)
- í˜„ì¬ ë°œì „ëŸ‰ (generation)
- ì´ì „ ì‹œê°„ ë°œì „ëŸ‰ (prev_generation)
- ì–´ì œ ë™ì‹œê°„ ë°œì „ëŸ‰ (yesterday_generation)
- ì¡°ë„ â†’ ì¼ì‚¬ëŸ‰ ë³€í™˜ (insolation)

---

### Relay Endpoints

#### `GET /api/relay/status`
í˜„ì¬ ë¦´ë ˆì´ ìƒíƒœ ì¡°íšŒ

**Response**:
```json
{
  "A": false,
  "B": true,
  "C": false,
  "D": true
}
```

#### `POST /api/relay/update`
ë¦´ë ˆì´ ìƒíƒœ ì—…ë°ì´íŠ¸

**Request**:
```json
{
  "A": true,
  "B": false,
  "C": true,
  "D": false
}
```

**Side Effects**:
- OFF â†’ ON ì „í™˜ ì‹œ `trade_history` í…Œì´ë¸”ì— ê¸°ë¡
- `buyer_id`: 1(A), 2(B), 3(C), 4(D)
- `amount`: í•´ë‹¹ ê°€êµ¬ ì†Œë¹„ ì „ë ¥ (W)

#### `GET /api/relay/control`
Arduino í´ë§ìš© (ë¬¸ìì—´ í˜•ì‹)

**Response**:
```json
{
  "relay_control": "0101"
}
```
- 4ìë¦¬ ë¬¸ìì—´: A, B, C, D ìˆœì„œ
- `0`: OFF, `1`: ON

#### `POST /api/relay/reset`
ëª¨ë“  ë¦´ë ˆì´ OFF

---

### Channels Endpoints

#### `GET /api/channels/optimal`
ìµœì  ì±„ë„ ì¡°í•© ê³„ì‚°

**Query Parameters**:
- `target_w`: ëª©í‘œ ì „ë ¥ëŸ‰ (W)

**Response**:
```json
{
  "channels": ["A", "C", "D"]
}
```

**ì•Œê³ ë¦¬ì¦˜**:
1. í˜„ì¬ SOC, ë°œì „ëŸ‰ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥ ì „ë ¥ ê³„ì‚°
2. ë°°í„°ë¦¬ ë³´í˜¸ ì„ê³„ê°’(10%) í™•ì¸
3. ëª¨ë“  ì¡°í•© ìƒì„± (2^4 = 16ê°œ)
4. ëª©í‘œ ì „ë ¥ ì´í•˜ì¸ ì¡°í•© í•„í„°ë§
5. ìµœëŒ€ ì±„ë„ ìˆ˜ â†’ ìµœëŒ€ ì „ë ¥ ìˆœ ì •ë ¬

#### `GET /api/channels/available`
í˜„ì¬ í™œì„±í™” ê°€ëŠ¥í•œ ì±„ë„

**Response**:
```json
{
  "A": true,
  "B": true,
  "C": false,
  "D": true
}
```

**ì¡°ê±´**:
- SOC >= 10%
- ê°€ìš© ì „ë ¥ >= ì±„ë„ ì†Œë¹„ ì „ë ¥

---

## ğŸ¤– ML ëª¨ë¸

### Random Forest Regressor

**ëª¨ë¸ íŒŒì¼**: `backend/models/rf_production_model.pkl`

**í•™ìŠµ ë°ì´í„°**:
- íŒŒì¼: `ml/data/total_data.csv`
- íŠ¹ì§•: ì‹œê³„ì—´ íƒœì–‘ê´‘ ë°œì „ ë°ì´í„°
- ê¸°ê°„: ìˆ˜ê°œì›” ~ 1ë…„ (í”„ë¡œì íŠ¸ ìˆ˜ì§‘ ë°ì´í„°)

**Feature Engineering**:

| Feature | Description |
|---------|-------------|
| year | ì—°ë„ |
| month | ì›” (1-12) |
| day | ì¼ (1-31) |
| hour | ì‹œê°„ (0-23) |
| generation | í˜„ì¬ ë°œì „ëŸ‰ (W) |
| prev_generation | ì´ì „ ì‹œê°„ ë°œì „ëŸ‰ (W) |
| yesterday_generation | ì–´ì œ ë™ì‹œê°„ ë°œì „ëŸ‰ (W) |
| insolation | ì¼ì‚¬ëŸ‰ (MJ/mÂ²) = lux Ã— 0.0079 Ã— 0.0036 |

**Target Variables** (Shifted):
- `generation_1h_ahead`: t+1 ì‹œê°„ ë°œì „ëŸ‰
- `generation_2h_ahead`: t+2 ì‹œê°„ ë°œì „ëŸ‰
- `generation_3h_ahead`: t+3 ì‹œê°„ ë°œì „ëŸ‰

**í•˜ì´í¼íŒŒë¼ë¯¸í„°** (`ml/config.json`):
```json
{
  "n_estimators": 100,
  "max_depth": 10,
  "min_samples_split": 5,
  "min_samples_leaf": 2,
  "random_state": 42
}
```

**ì„±ëŠ¥ ì§€í‘œ**:
- RMSE (Root Mean Squared Error)
- RÂ² Score
- ì‹œê°„ë³„ ì˜ˆì¸¡ ì •í™•ë„

**ì¶”ë¡  ê³¼ì •**:
1. ìµœì‹  ì„¼ì„œ ë°ì´í„° ì¡°íšŒ (`GET /api/data/latest`)
2. ì´ì „ ì‹œê°„ ë°ì´í„° ì¡°íšŒ (SQL: `timestamp < now - 1h`)
3. ì–´ì œ ë™ì‹œê°„ ë°ì´í„° ì¡°íšŒ (SQL: `timestamp LIKE yesterday same hour`)
4. Feature ë²¡í„° ìƒì„± (8ì°¨ì›)
5. ëª¨ë¸ ë¡œë“œ (`pickle.load`)
6. ì˜ˆì¸¡ ì‹¤í–‰ (`model.predict`)
7. ê²°ê³¼ ë°˜í™˜ (3ê°œ ê°’)

**ëª¨ë¸ ì¬í•™ìŠµ**:
```bash
cd ml
python model_train_rf.py
```

---

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### sun_data_realtime
ì‹¤ì‹œê°„ ì„¼ì„œ ë°ì´í„° (5ì´ˆ ê°„ê²©)

| Column | Type | Description |
|--------|------|-------------|
| id | INT (PK) | ìë™ ì¦ê°€ ID |
| soc | INT | ë°°í„°ë¦¬ ì”ëŸ‰ (0-100%) |
| solar_w | FLOAT | ë°œì „ëŸ‰ (W) |
| lux | FLOAT | ì¡°ë„ (lux) |
| timestamp | DATETIME | ì¸¡ì • ì‹œê°„ |

### sun_data_hourly
ì‹œê°„ë³„ í‰ê·  ë°ì´í„° (ì§‘ê³„)

| Column | Type | Description |
|--------|------|-------------|
| id | INT (PK) | ìë™ ì¦ê°€ ID |
| date | DATE | ë‚ ì§œ |
| hour | INT | ì‹œê°„ (0-23) |
| avg_soc | FLOAT | í‰ê·  SOC |
| avg_solar_w | FLOAT | í‰ê·  ë°œì „ëŸ‰ |
| avg_lux | FLOAT | í‰ê·  ì¡°ë„ |

**ì§‘ê³„ ì‘ì—…** (APScheduler):
- ë§¤ì‹œ ì •ê° ì‹¤í–‰
- `sun_data_realtime` 1ì‹œê°„ì¹˜ í‰ê·  ê³„ì‚°
- `sun_data_hourly`ì— INSERT
- ì˜¤ë˜ëœ realtime ë°ì´í„° ì‚­ì œ

### relay_status
ë¦´ë ˆì´ í˜„ì¬ ìƒíƒœ

| Column | Type | Description |
|--------|------|-------------|
| id | INT (PK) | ìë™ ì¦ê°€ ID |
| relay_name | VARCHAR(10) | A, B, C, D |
| status | VARCHAR(10) | "on" or "off" |

### trade_history
ì—ë„ˆì§€ ê±°ë˜ ë‚´ì—­

| Column | Type | Description |
|--------|------|-------------|
| id | INT (PK) | ìë™ ì¦ê°€ ID |
| buyer_id | INT | êµ¬ë§¤ì (1=A, 2=B, 3=C, 4=D) |
| amount | FLOAT | ê±°ë˜ ì „ë ¥ëŸ‰ (W) |
| timestamp | DATETIME | ê±°ë˜ ì‹œê° |

---

## ğŸ¨ ë””ìì¸ ê°€ì´ë“œ

### ì»¬ëŸ¬ íŒ”ë ˆíŠ¸

| Color | Hex | Usage |
|-------|-----|-------|
| ë…¸ë€ìƒ‰ (Primary) | `#FFD900` | íƒœì–‘ ì—ë„ˆì§€ ì—°ìƒ, ë©”ì¸ ê°•ì¡° |
| ê²€ì€ìƒ‰ (Secondary) | `#000000` | ë…¸ë€ìƒ‰ ëŒ€ë¹„, í…ìŠ¤íŠ¸ |
| í°ìƒ‰ (Background) | `#FFFFFF` | ê¹”ë”í•œ ë°°ê²½, ê°€ë…ì„± |
| ê·¸ë¦° (Accent) | `#82ca9d` | ì—ì½” ì¹œí™˜ê²½, ì°¨íŠ¸ ìƒ‰ìƒ |
| íšŒìƒ‰ (Neutral) | `#DCDCDC` | ë¹„í™œì„± ìƒíƒœ, ë³´ì¡° ìš”ì†Œ |

### ì¸í„°ë™ì…˜ ë””ìì¸

**SELL ë²„íŠ¼**:
- ê¸°ë³¸: íšŒìƒ‰ (`#E0E0E0`)
- í˜¸ë²„: ë…¸ë€ìƒ‰ (`#FFC700`)
- í´ë¦­: ë…¸ë€ìƒ‰ ìœ ì§€ + íŒë§¤ ì™„ë£Œ ì•Œë¦¼

**ê°€êµ¬ ì„ íƒ**:
- ë¯¸ì„ íƒ: `turnoff.png` (ì–´ë‘ìš´ ì§‘)
- ì„ íƒ: `turnon.png` (ì°½ë¬¸ì— ë¶ˆ ì¼œì§„ ì§‘)
- ìµœì  ì¡°í•©: ğŸ’¡ ì•„ì´ì½˜ í‘œì‹œ

**ì• ë‹ˆë©”ì´ì…˜**:
- Framer Motion ì‚¬ìš©
- ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ ì „í™˜ (Home í˜ì´ì§€)
- Floating íš¨ê³¼ (íƒœì–‘ ì´ë¯¸ì§€)

---

## ğŸ‘¥ íŒ€ ì†Œê°œ

**Team: Watt's Up?**

| ì´ë¦„ | ì—­í•  | GitHub |
|------|------|--------|
| ì˜¤ì™•ê²½ | Frontend Lead | [@OWK](https://github.com/Q5dis) |
| ì•ˆíƒœí˜„ | ML Engineer | [@ATH](https://github.com/ahntae) |
| ì´ë¯¼ì • | Backend Engineer | [@LMJ](https://github.com/tldms0327) |
| ìœ¤íƒœí›ˆ | Hardware Engineer | [@YTH](https://github.com/TaeHoonIm) |
| ìµœí•˜ì—° | Hardware Engineer | [@CHY](https://github.com/haayun) |

**í”„ë¡œì íŠ¸ ê¸°ê°„**: 2024.11 ~ 2025.12

**ì—°ë½ì²˜**:
- Email: solar-ess@example.com
- í”„ë¡œì íŠ¸ Repository: [GitHub](https://github.com/Q5dis/SolarESSManager)
- ë°ëª¨ ì‚¬ì´íŠ¸: [Vercel](https://solar-ess-manager.vercel.app)

---

## ğŸ“ ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ
- [React Documentation](https://react.dev/)
- [Vite Documentation](https://vitejs.dev/)
- [Flask Documentation](https://flask.palletsprojects.com/)
- [scikit-learn Documentation](https://scikit-learn.org/)
- [Recharts Documentation](https://recharts.org/)

### ê°œë°œ ê°€ì´ë“œ
- [Vercel ë°°í¬ ê°€ì´ë“œ](memos/vercel_deployment_presentation.md)
- [í”„ë ˆì  í…Œì´ì…˜ ëŒ€ë³¸](memos/presentation_script.txt)
- [í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì¼ì§€](memos/vercel_deployment_fix_report.md)

### ê¸°ìˆ  ë¸”ë¡œê·¸
- Mixed Content í•´ê²°: HTTPS í”„ë¡ íŠ¸ì—”ë“œ + HTTP ë°±ì—”ë“œ
- LocalStorage ê¸°ë°˜ ìƒíƒœ ë™ê¸°í™” ì „ëµ
- Random Forestë¥¼ ì´ìš©í•œ íƒœì–‘ê´‘ ë°œì „ëŸ‰ ì˜ˆì¸¡

---

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ

1. **íƒ€ì„ìŠ¤íƒ¬í”„ ê²€ì¦ ì œê±°**
   - í˜„ì¬: API ì‘ë‹µë§Œ ì„±ê³µí•˜ë©´ ì‹¤ì‹œê°„ ëª¨ë“œ
   - í–¥í›„: ë°ì´í„° ì‹ ì„ ë„ í‘œì‹œ UI ì¶”ê°€ ì˜ˆì •

2. **í´ë§ ê°„ê²© ìµœì í™”**
   - í˜„ì¬: 5ì´ˆ ê°„ê²© í´ë§
   - í–¥í›„: WebSocket ì‹¤ì‹œê°„ í†µì‹  ê²€í† 

3. **ë°°í„°ë¦¬ ë³´í˜¸ ì„ê³„ê°’**
   - í˜„ì¬: 10% ê³ ì •
   - í–¥í›„: ì‚¬ìš©ì ì„¤ì • ê°€ëŠ¥í•˜ë„ë¡ ê°œì„ 

---

## ğŸ“œ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

---

## ğŸ™ ê°ì‚¬ì˜ ë§

ì´ í”„ë¡œì íŠ¸ëŠ” [í•™êµ/ê¸°ê´€ëª…] ìº¡ìŠ¤í†¤ ë””ìì¸ ê³¼ì •ì˜ ì¼í™˜ìœ¼ë¡œ ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ ì§„í–‰ì— ë„ì›€ì„ ì£¼ì‹  êµìˆ˜ë‹˜, ë©˜í† ë‹˜ë“¤ê»˜ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤.

---

**Made with â˜€ï¸ by Team Watt's Up?**
